class StartPage{constructor(t){this.el=t.el,this.startTemplate=t.startTemplate.innerHTML}start(){location.hash="phones",this.el.innerHTML=this.startTemplate}}class PageList{constructor(t){this.MAX_LENGTH=2,this.el=t.el,this.phones=phones,this.list=new List({tmpl:document.getElementById("phone-item-tmpl"),el:document.querySelector('[data-component="phones-list"]')}),this.controls=new Controls({el:this.el.querySelector('[data-component="phones-control"]'),sort:this.el.querySelector('[data-control="sort"]')}),this.list.showList(this.phones),this.controls.el.addEventListener("search",this.search.bind(this)),this.controls.el.addEventListener("sort",this.sort.bind(this))}search(t){const e=t.detail.value;if(e.length>=this.MAX_LENGTH){const t=new RegExp(e,"i"),s=this.phones.filter(e=>t.test(e.name));this.list.showList(s)}else this.list.showList(this.phones)}sort(t){"age"===t.detail.value?(this.phones.sort((t,e)=>t.age>e.age?1:-1),this.list.showList(this.phones)):(this.phones.sort((t,e)=>t.name>e.name?1:-1),this.list.showList(this.phones))}}class List{constructor(t){this.el=t.el,this.tmpl=_.template(t.tmpl.innerHTML)}showList(t){let e="";t.forEach(t=>{e+=this.tmpl(t)}),this.el.innerHTML=e}}class Controls{constructor(t){this.el=t.el,this.searchEl=this.el.querySelector('[data-control="search"]'),this.sortEl=this.el.querySelector('[data-control="sort"]'),this.searchEl.addEventListener("input",this.onInput.bind(this)),this.sortEl.addEventListener("change",this.onSort.bind(this))}onInput(t){const e=t.target.value,s=new CustomEvent("search",{bubbles:!0,detail:{value:e}});this.el.dispatchEvent(s)}onSort(t){const e=t.target.value,s=new CustomEvent("sort",{bubbles:!0,detail:{value:e}});this.el.dispatchEvent(s)}}const startPage=new StartPage({el:document.querySelector(".row"),startTemplate:document.getElementById("start-template")});startPage.start(this.el,this.startTemplate);const page=new PageList({el:document.querySelector(".row")});function router(t){if(t.indexOf("phones")>-1){new StartPage({el:document.querySelector(".row"),startTemplate:document.getElementById("start-template")}).start(this.el,this.startTemplate);new PageList({el:document.querySelector(".row")})}else{new PagePhone({el:document.querySelector(".row"),tmpl:document.getElementById("page-phone-tmpl"),id:t.slice(1)})}}window.addEventListener("hashchange",t=>{router(location.hash)});class PagePhone{constructor(t){this.el=t.el,this.tmpl=_.template(t.tmpl.innerHTML),this.id=t.id,this.showPagePhone()}showPagePhone(){const t=phones.find(t=>t.id===this.id);this.el.innerHTML=this.tmpl(t)}}